<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Background gradient -->
    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#1e293b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#334155;stop-opacity:1" />
    </linearGradient>
    
    <!-- Step gradients -->
    <linearGradient id="step1Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="step2Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="step3Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="step4Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
    
    <!-- Browser and Server gradients -->
    <linearGradient id="browserGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#0891b2;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="serverGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#dc2626;stop-opacity:1" />
    </linearGradient>
    
    <!-- Glow filter -->
    <filter id="glow">
      <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
      <feMerge> 
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000000" flood-opacity="0.3"/>
    </filter>
    
    <!-- Arrow markers -->
    <marker id="blueArrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L8,3 z" fill="#3b82f6"/>
    </marker>
    <marker id="greenArrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L8,3 z" fill="#10b981"/>
    </marker>
    <marker id="orangeArrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L8,3 z" fill="#f59e0b"/>
    </marker>
    <marker id="purpleArrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L8,3 z" fill="#8b5cf6"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="700" fill="url(#bg)"/>
  
  <!-- Title with glow effect -->
  <text x="600" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="36" font-weight="bold" fill="#ffffff" filter="url(#glow)">
    üîÑ ViewState Flow in WebForms
  </text>
  
  <!-- Subtitle -->
  <text x="600" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="#94a3b8">
    Understanding how ViewState maintains control state across postbacks
  </text>
  
  <!-- Browser Section -->
  <rect x="80" y="120" width="200" height="120" fill="url(#browserGrad)" stroke="#06b6d4" stroke-width="3" rx="20" filter="url(#shadow)"/>
  <text x="180" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
    üåê Browser
  </text>
  <text x="180" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="rgba(255,255,255,0.9)">
    Client-Side
  </text>
  <text x="180" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="rgba(255,255,255,0.8)">
    User Interactions
  </text>
  <text x="180" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="rgba(255,255,255,0.8)">
    Form Submissions
  </text>
  
  <!-- Server Section -->
  <rect x="920" y="120" width="200" height="120" fill="url(#serverGrad)" stroke="#ef4444" stroke-width="3" rx="20" filter="url(#shadow)"/>
  <text x="1020" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
    üñ•Ô∏è Server
  </text>
  <text x="1020" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="rgba(255,255,255,0.9)">
    Server-Side
  </text>
  <text x="1020" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="rgba(255,255,255,0.8)">
    Page Processing
  </text>
  <text x="1020" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="rgba(255,255,255,0.8)">
    State Management
  </text>
  
  <!-- Step 1: Initial Request -->
  <rect x="350" y="120" width="500" height="80" fill="url(#step1Grad)" stroke="#3b82f6" stroke-width="3" rx="15" filter="url(#shadow)"/>
  <text x="600" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
    1Ô∏è‚É£ Initial Page Request
  </text>
  <text x="600" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="rgba(255,255,255,0.9)">
    Browser requests page ‚Üí Server generates HTML + ViewState
  </text>
  
  <!-- Arrow 1 -->
  <path d="M280 160 L350 160" stroke="#3b82f6" stroke-width="3" fill="none" marker-end="url(#blueArrow)"/>
  <text x="315" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#60a5fa">GET</text>
  
  <!-- Step 2: Response with ViewState -->
  <rect x="350" y="240" width="500" height="80" fill="url(#step2Grad)" stroke="#10b981" stroke-width="3" rx="15" filter="url(#shadow)"/>
  <text x="600" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
    2Ô∏è‚É£ Response with ViewState
  </text>
  <text x="600" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="rgba(255,255,255,0.9)">
    Server sends HTML with hidden __VIEWSTATE field
  </text>
  
  <!-- Arrow 2 -->
  <path d="M850 160 L920 160" stroke="#3b82f6" stroke-width="3" fill="none" marker-end="url(#blueArrow)"/>
  <path d="M920 200 L850 280" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#greenArrow)"/>
  <text x="885" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#60a5fa">REQUEST</text>
  <text x="885" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#34d399">HTML + ViewState</text>
  
  <!-- Step 3: Postback Event -->
  <rect x="350" y="360" width="500" height="80" fill="url(#step3Grad)" stroke="#f59e0b" stroke-width="3" rx="15" filter="url(#shadow)"/>
  <text x="600" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
    3Ô∏è‚É£ Postback Event
  </text>
  <text x="600" y="415" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="rgba(255,255,255,0.9)">
    User action triggers postback ‚Üí ViewState sent back to server
  </text>
  
  <!-- Arrow 3 -->
  <path d="M350 280 L280 400" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#greenArrow)"/>
  <path d="M280 400 L350 400" stroke="#f59e0b" stroke-width="3" fill="none" marker-end="url(#orangeArrow)"/>
  <text x="315" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#34d399">RESPONSE</text>
  <text x="315" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">POST + ViewState</text>
  
  <!-- Step 4: State Restoration -->
  <rect x="350" y="480" width="500" height="80" fill="url(#step4Grad)" stroke="#8b5cf6" stroke-width="3" rx="15" filter="url(#shadow)"/>
  <text x="600" y="510" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
    4Ô∏è‚É£ State Restoration
  </text>
  <text x="600" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="rgba(255,255,255,0.9)">
    Server deserializes ViewState ‚Üí Restores control state
  </text>
  
  <!-- Arrow 4 -->
  <path d="M850 400 L920 520" stroke="#f59e0b" stroke-width="3" fill="none" marker-end="url(#orangeArrow)"/>
  <path d="M920 200 L920 480" stroke="#8b5cf6" stroke-width="3" fill="none" marker-end="url(#purpleArrow)" stroke-dasharray="8,4"/>
  <text x="885" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">POSTBACK</text>
  <text x="940" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#c084fc">PROCESS</text>
  
  <!-- ViewState Details Section -->
  <rect x="80" y="580" width="520" height="100" fill="rgba(255,255,255,0.08)" stroke="rgba(255,255,255,0.15)" stroke-width="2" rx="15" filter="url(#shadow)"/>
  <text x="340" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff">
    üì¶ ViewState Contains
  </text>
  <text x="100" y="635" font-family="Arial, sans-serif" font-size="14" fill="#d1d5db">‚Ä¢ Control property values and hierarchy</text>
  <text x="100" y="655" font-family="Arial, sans-serif" font-size="14" fill="#d1d5db">‚Ä¢ Page state information and custom data</text>
  <text x="100" y="675" font-family="Arial, sans-serif" font-size="14" fill="#fbbf24">‚ö†Ô∏è Can become very large - impacts performance!</text>
  
  <!-- Performance Tips Section -->
  <rect x="620" y="580" width="500" height="100" fill="rgba(255,255,255,0.08)" stroke="rgba(255,255,255,0.15)" stroke-width="2" rx="15" filter="url(#shadow)"/>
  <text x="870" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff">
    ‚ö° Performance Impact
  </text>
  <text x="640" y="635" font-family="Arial, sans-serif" font-size="14" fill="#d1d5db">‚Ä¢ Increases page size and bandwidth usage</text>
  <text x="640" y="655" font-family="Arial, sans-serif" font-size="14" fill="#d1d5db">‚Ä¢ Slower page loads and server processing</text>
  <text x="640" y="675" font-family="Arial, sans-serif" font-size="14" fill="#4ade80">üí° Disable ViewState for read-only controls</text>
</svg>